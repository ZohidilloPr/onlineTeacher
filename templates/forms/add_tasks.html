{% extends "../users/profile.html" %}

{% block main %}
    <style>
        .main{
            max-width: 80%;
            margin: 100px auto;
        }
        .file{
            padding: 20px;
            display: block;
            color: white;
            text-align: center;
            background: #333;
            border-radius: 3px;
        }
    </style>
    <div class="main">
        <a href="{% url 'tasks_today' %}" class="btn btn-sm px-5 btn-outline-dark"><i class=" me-2 fa fa-long-arrow-left" aria-hidden="true"></i> Back</a><br>
        <h3 class="my-3 "><b style="color: darkcyan;">Vazifa</b>Qo'shish</h3>
        <form action="" method="post">
            {% csrf_token %}
            <div class="form-floating my-3">
                <select name="student" class="form-select" id="floatingSelect" aria-label="Floating label select example">
                    <option selected>Open this select menu</option>
                    {% for student in students %}
                        <option value="{{ student.id }}">{{ student }}</option>
                    {% endfor %}
                </select>
                <label for="floatingSelect">Students with selects</label>
            </div>
            <div class="form-floating my-3">
                <input type="text" name="title" class="form-control" id="title" placeholder="Title">
                <label for="title">Title</label>
            </div>
            {{ form.media }}
            {{ form.comment }}
            <div class="row">
                <div class="col">
                    <div class="form-floating my-3">
                        <input type="number" name="order_num" class="form-control" id="floatingOrderNum" placeholder="OrderNum">
                        <label for="floatingOrderNum">Tartib raqam</label>
                    </div>
                </div>
                <div class="col">
                    <div class="form-floating my-3">
                        <input type="datetime-local" name="add_time" class="form-control" id="floatingAddTime" placeholder="AddTime">
                        <label for="floatingAddTime">Vazifa topshirilayotgan vaqti</label>
                    </div>
                </div>
                <div class="col">
                    <div class="form-floating my-3">
                        <input type="datetime-local" name="complite_time" class="form-control" id="floatingCompliteTime" placeholder="CompliteTime">
                        <label for="floatingCompliteTime">Vazifa topshirish vaqti</label>
                    </div>
                </div>
            </div>
            <div class="form-floating my-3">
                <input type="text" readonly name="slug" class="form-control" id="slug" placeholder="slug">
                <label for="floatingSlug">Slug: Tegish kerak emas</label>
            </div>
            <br>
            <button type="submit" class="float-end px-5 btn btn-dark"><i class="fa fa-paper-plane me-3" aria-hidden="true"></i>send</button>
        </form>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script>
        function convertToSlug(Text) {
            // textni slugga ogirib beradigan function
            return Text.toLowerCase()
                .replace(/ /g, "-")
                .replace(/[^\w-]+/g, "");
        }
        var title = document.getElementById("title")
        var slug = document.getElementById("slug")
        title.addEventListener("input", () => {
            slug.value = convertToSlug(title.value)
        })
    </script>
{% endblock main %}